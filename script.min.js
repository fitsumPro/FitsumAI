const _0xa219a0=_0x259d;function _0x259d($,e){let t=_0x5b38();return(_0x259d=function($,e){return t[$-=441]})($,e)}!function($,e){let t=_0x259d,a=$();for(;;)try{let x=-parseInt(t(466))/1*(-parseInt(t(513))/2)+parseInt(t(519))/3*(-parseInt(t(506))/4)+parseInt(t(485))/5+parseInt(t(514))/6*(parseInt(t(497))/7)+parseInt(t(442))/8+-parseInt(t(511))/9+-parseInt(t(447))/10;if(599995===x)break;a.push(a.shift())}catch(_){a.push(a.shift())}}(_0x5b38,599995);const container=document[_0xa219a0(518)](_0xa219a0(496)),chatsContainer=document[_0xa219a0(518)](_0xa219a0(535)),promptForm=document.querySelector(_0xa219a0(476)),promptInput=promptForm[_0xa219a0(518)](_0xa219a0(472)),fileInput=promptForm[_0xa219a0(518)]("#file-input"),fileUploadWrapper=promptForm.querySelector(_0xa219a0(493)),themeToggleBtn=document[_0xa219a0(518)](_0xa219a0(503)),API_KEY=_0xa219a0(461),API_URL=_0xa219a0(526)+API_KEY;function _0x5b38(){let $=["add-file-btn","themeColor",".suggestions-item","fileName","text","#cancel-file-btn","dark_mode","stringify","9600lynbbf","bot-responding","light-theme",".prompt-wrapper",'\n    <p class="message-text"></p>\n    ',"smooth","error","hide-controls",".file-upload-wrapper",".bot-message.loading","addEventListener",".container","1740263MaITvP","color","toggle","data",".file-preview",'<img class="avatar" src="gemini.svg" /> <p class="message-text">Just a sec...</p>',"#theme-toggle-btn","type","#add-file-btn","8YXrafU","#stop-response-btn","getItem","preventDefault","#d62939","1306629urZbUk","textContent","1130ycZTVq","6hRvDoo","split","onload","querySelectorAll","querySelector","1180446mCoxBH","body","file-attached","add","readAsDataURL","target","click","https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=","classList","model","trim","stop-response-btn","change","submit","candidates",".message-text",".chats-container","mime_type","innerHTML","2723536sDPytQ","message","startsWith","scrollHeight","result","1814860ExwQUv","setItem","dispatchEvent","abort","length","bot-message","light_mode","isImage","img-attached","replace","prompt-input","src","name","appendChild","AIzaSyA_V2RWS-a1nBf95GGKNZNMPfmLqhvOgpw",'<img src="data:',"contains","</p>","value","1987kXgHNp","file","json","user","scrollTo","active",".prompt-input","loading","parts","remove",".prompt-form"];return(_0x5b38=function(){return $})()}let controller,typingInterval;const chatHistory=[],userData={message:"",file:{}},isLightTheme=localStorage[_0xa219a0(508)](_0xa219a0(478))===_0xa219a0(453);document[_0xa219a0(520)].classList.toggle(_0xa219a0(487),isLightTheme),themeToggleBtn.textContent=isLightTheme?"dark_mode":_0xa219a0(453);const createMessageElement=($,...e)=>{let t=_0xa219a0,a=document.createElement("div");return a[t(527)].add(t(443),...e),a.innerHTML=$,a},scrollToBottom=()=>container[_0xa219a0(470)]({top:container[_0xa219a0(445)],behavior:_0xa219a0(490)}),typingEffect=($,e,t)=>{let a=_0xa219a0;e[a(512)]="";let x=$[a(515)](" "),_=0;typingInterval=setInterval(()=>{let $=a;_<x[$(451)]?(e[$(512)]+=(0===_?"":" ")+x[_++],scrollToBottom()):(clearInterval(typingInterval),t[$(527)][$(475)]("loading"),document[$(520)][$(527)][$(475)]("bot-responding"))},40)},generateResponse=async $=>{let e=_0xa219a0,t=$[e(518)](".message-text");controller=new AbortController,chatHistory.push({role:e(469),parts:[{text:userData[e(443)]},...userData[e(467)].data?[{inline_data:(({fileName:$,isImage:e,...t})=>t)(userData[e(467)])}]:[]]});try{let a=await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON[e(484)]({contents:chatHistory}),signal:controller.signal}),x=await a[e(468)]();if(!a.ok)throw Error(x[e(491)][e(443)]);let _=x[e(533)][0].content[e(474)][0][e(481)][e(456)](/\*\*([^*]+)\*\*/g,"$1")[e(529)]();typingEffect(_,t,$),chatHistory.push({role:e(528),parts:[{text:_}]})}catch(r){t[e(512)]="AbortError"===r[e(459)]?"Response generation stopped.":r.message,t.style[e(498)]=e(510),$[e(527)][e(475)](e(473)),document[e(520)][e(527)][e(475)]("bot-responding"),scrollToBottom()}finally{userData.file={}}},handleFormSubmit=$=>{let e=_0xa219a0;$[e(509)]();let t=promptInput.value[e(529)]();if(!t||document[e(520)][e(527)][e(463)](e(486)))return;userData[e(443)]=t,promptInput[e(465)]="",document[e(520)].classList.add("chats-active",e(486)),fileUploadWrapper[e(527)][e(475)]("file-attached",e(455),e(471));let a=e(489)+(userData[e(467)][e(500)]?userData[e(467)][e(454)]?e(462)+userData[e(467)][e(536)]+";base64,"+userData[e(467)][e(500)]+'" class="img-attachment" />':'<p class="file-attachment"><span class="material-symbols-rounded">description</span>'+userData[e(467)][e(480)]+e(464):"")+"\n  ",x=createMessageElement(a,"user-message");x.querySelector(e(534))[e(512)]=userData.message,chatsContainer[e(460)](x),scrollToBottom(),setTimeout(()=>{let $=e,t=$(502),a=createMessageElement(t,$(452),$(473));chatsContainer[$(460)](a),scrollToBottom(),generateResponse(a)},600)};fileInput.addEventListener(_0xa219a0(531),()=>{let $=_0xa219a0,e=fileInput.files[0];if(!e)return;let t=e[$(504)][$(444)]("image/"),a=new FileReader;a[$(523)](e),a[$(516)]=a=>{let x=$;fileInput[x(465)]="";let _=a[x(524)][x(446)][x(515)](",")[1];fileUploadWrapper[x(518)](x(501))[x(458)]=a[x(524)][x(446)],fileUploadWrapper[x(527)][x(522)]("active",t?"img-attached":x(521)),userData[x(467)]={fileName:e.name,data:_,mime_type:e.type,isImage:t}}}),document[_0xa219a0(518)](_0xa219a0(482))[_0xa219a0(495)](_0xa219a0(525),()=>{let $=_0xa219a0;userData[$(467)]={},fileUploadWrapper[$(527)].remove("file-attached",$(455),$(471))}),document[_0xa219a0(518)](_0xa219a0(507))[_0xa219a0(495)](_0xa219a0(525),()=>{let $=_0xa219a0;controller?.[$(450)](),userData[$(467)]={},clearInterval(typingInterval),chatsContainer[$(518)]($(494))[$(527)][$(475)]($(473)),document[$(520)][$(527)].remove($(486))}),themeToggleBtn[_0xa219a0(495)](_0xa219a0(525),()=>{let $=_0xa219a0,e=document[$(520)][$(527)][$(499)]("light-theme");localStorage[$(448)]($(478),e?"light_mode":$(483)),themeToggleBtn.textContent=e?"dark_mode":"light_mode"}),document.querySelector("#delete-chats-btn").addEventListener(_0xa219a0(525),()=>{let $=_0xa219a0;chatHistory.length=0,chatsContainer[$(441)]="",document.body[$(527)].remove("chats-active","bot-responding")}),document[_0xa219a0(517)](_0xa219a0(479)).forEach($=>{let e=_0xa219a0;$[e(495)](e(525),()=>{let t=e;promptInput[t(465)]=$.querySelector(".text")[t(512)],promptForm[t(449)](new Event(t(532)))})}),document[_0xa219a0(495)](_0xa219a0(525),({target:$})=>{let e=_0xa219a0,t=document.querySelector(e(488)),a=$[e(527)][e(463)](e(457))||t[e(527)].contains(e(492))&&($.id===e(477)||$.id===e(530));t[e(527)][e(499)](e(492),a)}),promptForm[_0xa219a0(495)]("submit",handleFormSubmit),promptForm[_0xa219a0(518)](_0xa219a0(505))[_0xa219a0(495)](_0xa219a0(525),()=>fileInput.click());